---
alwaysApply: true
---

# Data Cleaning - How Little Padawan Handles Raw Data

Little Padawan automatically cleans your Garage 61 exports to remove junk data.

---

## What Gets Filtered Out

### 1. **Invalid Laps**
- Lap time = 0 or negative
- Missing lap time (NaN)
- These are incomplete laps or data errors

### 2. **Extreme Outliers** (Partial Laps, Crashes)
Uses statistical method (IQR - Interquartile Range):
- Calculates Q1 (25th percentile) and Q3 (75th percentile)
- Calculates IQR = Q3 - Q1
- Marks as outlier if:
  - Lap time > Q3 + 3×IQR (way too slow - crash/off-track)
  - Lap time < Q1 - 3×IQR (way too fast - partial lap)

**Example**:
```
Your lap times: [90.2, 91.5, 90.8, 91.1, 150.3, 89.9, 90.5]
                                      ^^^^^ outlier (crash)

Q1 = 90.2, Q3 = 91.1, IQR = 0.9
Upper bound = 91.1 + 3×0.9 = 93.8
150.3 > 93.8 → marked as outlier, excluded from analysis
```

### 3. **Incident Laps** (if available)
If your CSV has an "Inc" column (incidents):
- Laps with incidents are marked as "dirty"
- Only clean laps used for consistency analysis

### 4. **Invalid Sector Times**
- Sector time ≤ 0 or missing
- Laps with invalid sectors marked as "not clean"

---

## What You See

Little Padawan will tell you:
```
"I see 20 laps total:
 - 18 clean laps (used for analysis)
 - 2 dirty laps (1 outlier, 1 incident)"
```

Clean laps = valid data for coaching
Dirty laps = kept for reference but not used in analysis

---

## Why This Matters

**Without cleaning**:
```
Best lap: 90.2s
Average: 102.5s  ← Skewed by crash lap!
σ: 15.3s         ← Huge variance from outliers
```

**With cleaning**:
```
Best lap: 90.2s
Average: 90.8s   ← Accurate
σ: 0.6s          ← Real consistency measure
```

---

## Manual Override

If Little Padawan filters out a lap you want to keep, you can:

1. **Check the data**:
```python
from tools.core.data_loader import load_session_data

df = load_session_data('your_session.csv')
print(df[['LapTime', 'clean', 'is_outlier']])
```

2. **Adjust the threshold** (in `data_loader.py`):
```python
# Current: 3×IQR (very conservative)
# More aggressive: 1.5×IQR (removes more outliers)
# Less aggressive: 5×IQR (keeps more data)
```

---

## What Gets Kept

- All valid complete laps
- Laps within reasonable time range
- Clean laps (no incidents)
- Laps with valid sector times

---

## Bottom Line

**You don't need to pre-clean your data.** Just export from Garage 61 and Little Padawan handles the rest.

Partial laps, crashes, and data errors are automatically filtered out so you get accurate coaching.
