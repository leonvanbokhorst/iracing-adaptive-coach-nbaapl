# Tools Architecture: Facts vs Meaning

## Philosophy

**Tools provide FACTS. Little Padawan provides MEANING.**

Tools output pure JSON data with zero interpretation. Little Padawan reads the facts, interprets them in context, and coaches Master Lonn.

---

## Directory Structure

```
tools/
├── core/           # Factual tools (JSON output only)
│   ├── analyze_session.py
│   ├── compare_laps.py
│   └── ...
├── coach/          # Generated by Little Padawan on-demand
│   └── (created as needed)
└── README.md       # This file
```

---

## Core Tools (Facts Only)

### Characteristics
- ✅ Output pure JSON
- ✅ No interpretation
- ✅ No coaching language
- ✅ Just numbers and data
- ❌ No "you should" or "focus on"
- ❌ No rule-based logic

### Example: `analyze_session.py`

**Bad (rule-based interpretation)**:
```json
{
  "sector_2": {
    "status": "needs_work",
    "recommendation": "Focus on Sector 2 consistency"
  }
}
```

**Good (pure facts)**:
```json
{
  "sectors": {
    "Sector 2": {
      "best": 30.845,
      "average": 31.807,
      "sigma": 0.748,
      "loss_per_lap": 0.961
    }
  }
}
```

Little Padawan reads this and decides:
- "Sector 2 has 3x more loss than others → focus area"
- "σ = 0.748s → consistency issue"
- "Does Master Lonn need a visualization?"

---

## Coach Tools (Generated On-Demand)

### When to Create
Little Padawan creates coach tools when:
1. Master Lonn asks for specific analysis
2. A pattern emerges that needs deeper investigation
3. Existing tools don't provide the needed facts

### Characteristics
- Still output JSON (facts only)
- More specialized than core tools
- Created in `tools/coach/`
- Tracked in `learning_memory.json`
- Deleted if not useful

### Example Scenarios

**Master Lonn**: "I feel like I'm braking too early in Turn 3"

**Little Padawan**:
1. Checks if tool exists: `tools/coach/analyze_braking_zones.py`
2. If not, generates it to output braking point facts
3. Runs it: `python tools/coach/analyze_braking_zones.py data/session.csv`
4. Reads JSON output
5. Interprets: "Your Turn 3 braking is 15m earlier than best lap"
6. Coaches: "Try braking 10m later as a first step"

---

## How Little Padawan Uses Tools

### 1. Run Tool
```bash
python tools/core/analyze_session.py data/session.csv
```

### 2. Read JSON Facts
```python
import subprocess
import json

result = subprocess.run(
    ['python', 'tools/core/analyze_session.py', 'data/session.csv'],
    capture_output=True,
    text=True
)

facts = json.loads(result.stdout)
```

### 3. Interpret Facts
```python
# Little Padawan's interpretation logic
sector_losses = {name: data['loss_per_lap'] 
                 for name, data in facts['sectors'].items()}

max_loss_sector = max(sector_losses, key=sector_losses.get)
max_loss = sector_losses[max_loss_sector]
avg_loss = sum(sector_losses.values()) / len(sector_losses)

if max_loss > 2 * avg_loss:
    focus_area = max_loss_sector
    # This is where Master Lonn should focus
```

### 4. Coach Master Lonn
```
"Master Lonn, I analyzed your session.

Sector 2 is your focus area:
- Loss per lap: 0.96s
- That's 3x more than other sectors
- Best: 30.85s, Average: 31.81s

Let's work on Sector 2 consistency.
Goal: Average under 31.0s

Want me to show you a chart of your S2 times?"
```

---

## Creating New Core Tools

### Template

```python
#!/usr/bin/env python3
"""
Core Tool: [Tool Name] (FACTS ONLY)

This tool outputs PURE FACTS as JSON. No interpretation, no coaching.
Little Padawan reads this output and gives it meaning.

Usage:
    python tools/core/tool_name.py <args>
    
Output: JSON with factual data
"""

import sys
import json

def analyze_facts(data):
    """Return pure facts as dictionary"""
    facts = {
        "metric_1": value,
        "metric_2": value,
        # Only numbers and data, no interpretation
    }
    return facts

def main():
    # Parse arguments
    # Load data
    # Analyze facts
    # Output JSON
    facts = analyze_facts(data)
    print(json.dumps(facts, indent=2))

if __name__ == "__main__":
    main()
```

### Rules
1. Output must be valid JSON
2. No interpretation in output
3. No coaching language
4. Pure numbers and data structures
5. Handle errors gracefully (return error in JSON)

---

## Little Padawan Can Also Search

Little Padawan can use search to find useful facts:
- Racing techniques
- Track-specific tips
- Data analysis methods
- Coaching strategies

Then apply those facts to Master Lonn's specific data.

---

## Why This Matters

### ❌ Rule-Based (Old Way)
```python
if sigma > 1.0:
    print("You need to work on consistency")
```

Problem: Rules are rigid, context-blind, not adaptive.

### ✅ Data-Driven (New Way)
```python
# Tool outputs facts
facts = {"sigma": 1.43}

# Little Padawan interprets
# - Knows Master Lonn's history
# - Understands context
# - Adapts coaching style
# - Decides if this needs attention NOW
```

---

## Bottom Line

**Tools = Facts (JSON)**
**Little Padawan = Meaning (Coaching)**

This separation allows Little Padawan to be truly adaptive, not rule-based.
